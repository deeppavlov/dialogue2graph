dialogue2graph.utils.vector_stores
==================================

.. py:module:: dialogue2graph.utils.vector_stores

.. autoapi-nested-parse::

   Vector Stores
   -------------

   The module contains storage of text vectors for dialog turns.



Classes
-------

.. autoapisummary::

   dialogue2graph.utils.vector_stores.DialogueStore
   dialogue2graph.utils.vector_stores.NodeStore


Module Contents
---------------

.. py:class:: DialogueStore(dialogue: list[dict[str, str]], embedder: langchain_community.embeddings.HuggingFaceEmbeddings, score_threshold=0.995)

   Vector store for dialogues to conduct searching
   User and assistant utterances vectorized separately

   .. attribute:: _assistant_store

      store for assistant utterances

   .. attribute:: _user_store

      store for user utterances

   .. attribute:: _assistant_size

      number of assistant utterances

   .. attribute:: _score_threshold

      simlarity threshold


   .. py:method:: search_assistant(utterance) -> list[str]

      Search for utterance over assistant store

      :param utterance: utterance to search for

      :returns: list of found documents ids of assistant store



   .. py:method:: get_user_by_id(ids: list[str]) -> list[str]

      Get utterances of user with ids

      :param ids: ids of user documents to get

      :returns: list of utterances



.. py:class:: NodeStore(nodes: list[dict], embedder: langchain_community.embeddings.HuggingFaceEmbeddings)

   Vector store for graph nodes

   .. attribute:: _nodes_store

      store for assistant utterances

   .. attribute:: _utterances

      list of (node_utterance, node_id)


   .. py:method:: find_node(utterance: str) -> int

      Search for node by utterance

      :param utterance: uttetance to search by

      :returns: Found node id or None if not found



